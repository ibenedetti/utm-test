<!DOCTYPE html>
<html>
<head>
    <title>UTM Test</title>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .debug-box { 
            background: #f5f5f5; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>URL Parameters Test</h1>
    
    <div class="debug-box">
        <h3>Raw URL:</h3>
        <div id="rawUrl"></div>
    </div>

    <div class="debug-box">
        <h3>Search String:</h3>
        <div id="searchString"></div>
    </div>

    <div class="debug-box">
        <h3>Decoded Parameters:</h3>
        <div id="decodedParams"></div>
    </div>

    <div class="debug-box">
        <h3>URLSearchParams entries:</h3>
        <div id="searchParamsEntries"></div>
    </div>

    <script>
        window.onload = function() {
            // Get and display the raw URL
            const fullUrl = window.location.href;
            document.getElementById('rawUrl').textContent = fullUrl;
            
            // Get and display the raw search string
            const searchString = window.location.search;
            document.getElementById('searchString').textContent = searchString;
            
            // Display decoded parameters
            const decodedSearch = decodeURIComponent(searchString);
            document.getElementById('decodedParams').textContent = decodedSearch;
            
            // Use URLSearchParams
            const params = new URLSearchParams(window.location.search);
            let paramsOutput = '';
            for (const [key, value] of params) {
                paramsOutput += `${key}: ${value}\n`;
            }
            document.getElementById('searchParamsEntries').textContent = paramsOutput || 'No parameters found';
            
            // Console logging for additional debugging
            console.log({
                fullUrl,
                searchString,
                decodedSearch,
                paramsEntries: Object.fromEntries(params)
            });
        }
    </script>
</body>
</html>